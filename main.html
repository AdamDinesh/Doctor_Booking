<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="form.css" />
    <link rel="stylesheet" href="patient.css" />
    <!-- <script src="form.js" defer></script> -->
    <script src="patient.js" defer></script>
  </head>
  <body>
    <header class="header">
      <div class="logo">
        <span>Health</span>
        <span>Bloom</span>
      </div>
      <nav>
        <ul class="nav-list">
          <li><a href="#" class="active" id="homepage-link">Home</a></li>
          <li><a href="#" id="appoinmentpage-link">Appointments</a></li>
          <li><a href="#">Doctors</a></li>
          <li><a href="#">Service</a></li>
          <li><a href="#">About</a></li>
          <li onclick="showAppoinmentForm()" class="btn btn-primary">
            <a>Get Appoinment</a>
          </li>
          <li class="profile">
            <a href="#"><div class="profile-logo"></div></a>
          </li>
        </ul>
        <div class="show-profile">
          <div class="profile-details">
            <p>UserName</p>
            <p>abc@gmail.com</p>
            <a class="logout" href="index.html">Logout</a>
          </div>
        </div>
      </nav>
    </header>

    <section class="main-section">
      <div class="main-container">
        <div class="main-content">
          <h1>We Are Providing Best And Affordable Health Care</h1>
          <p class="description">
            Our skilled doctors have tremendous experience with wide range of
            diseases to serve the needs of our patients.
          </p>
          <ul class="feature-lists">
            <li>
              <img
                class="tick-icon"
                src="images/icons8-done-24.png"
                alt="tick-icon"
              />
              <span>Emergency Cases</span>
            </li>
            <li>
              <img
                class="tick-icon"
                src="images/icons8-done-24.png"
                alt="tick-icon"
              />
              <span>Expert Doctors</span>
            </li>
            <li>
              <img
                class="tick-icon"
                src="images/icons8-done-24.png"
                alt="tick-icon"
              />
              <span>Modern Clinic</span>
            </li>
            <li>
              <img
                class="tick-icon"
                src="images/icons8-done-24.png"
                alt="tick-icon"
              />
              <span>24/7 Help Center</span>
            </li>
          </ul>
          <div class="links">
            <button onclick="showAppoinmentForm()">
              <a class="btn btn-primary" href="#">Get Appointment</a>
            </button>
          </div>
        </div>
        <div class="appoinment-container hidden">
          <h2>Your Appointments</h2>
          <div class="card-container">
            <p class="center">No Appoinments....</p>
            <!-- <div class="appoinment-card">
              <h3 class="appoinment-title">Appoinment On 22-22-2222 4:30 pm</h3>
              <div class="card-box">
                <p class="card-doctor">Doctor name</p>
                <p class="card-doctor-name">Dr.Smith</p>
                <p>View More</p>
                <p class="card-checkup">Checkup Details</p>

                <p class="card-checkup-detail">General Checkup</p>
              </div>
            </div> -->
          </div>
          <div class="right">
            <button onclick="showAppoinmentForm()">
              <a class="btn btn-primary" href="#">New Appointment</a>
            </button>
          </div>
        </div>
      </div>
      <div class="img"></div>
    </section>
    <section class="form-section">
      <div class="form-main-container">
        <div class="form-container">
          <header class="form-header">
            <h1 class="form-heading">New Patient Appoinment Form</h1>
          </header>
          <form action="#" id="appoinment-form" name="appoinmentform">
            <div>
              <label class="label">FullName</label>
              <div class="input-box input-fulname">
                <div>
                  <input
                    type="text"
                    id="userfirstname"
                    name="userfirstname"
                    placeholder="John "
                  />
                  <label class="label-secondary" for="username"
                    >First Name</label
                  >
                </div>
                <div>
                  <input
                    type="text"
                    id="userlastname"
                    name="userlastname"
                    placeholder="Smith"
                  />
                  <label class="label-secondary" for="username"
                    >Last Name</label
                  >
                </div>
              </div>
            </div>
            <div class="input-box">
              <div>
                <label class="label" for="useremail">Email Address</label>
                <input
                  type="email"
                  id="useremail"
                  name="useremail"
                  placeholder="my@example.com"
                />
              </div>
              <div>
                <label class="label" for="usernumber">Phone No</label>
                <input
                  type="text"
                  id="usernumber"
                  name="usernumber"
                  placeholder=" +91 00000 00000"
                />
              </div>
            </div>
            <div class="input-box">
              <div>
                <label class="label" for="dob">Date of Birth</label>
                <input
                  type="date"
                  id="userdob"
                  name="userdob"
                  placeholder="Date of birth"
                />
              </div>
              <div class="input-field">
                <label class="label">Gender</label>
                <div class="gender">
                  <div>
                    <input
                      type="radio"
                      name="gender"
                      value="Male"
                      id="gen1"
                    /><label for="gen1">Male</label>
                  </div>
                  <div>
                    <input
                      type="radio"
                      name="gender"
                      value="Female"
                      id="gen2"
                    /><label for="gen2">Female</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="input-col-3">
              <div>
                <label class="label" for="bloodgroup">Blood Group</label>
                <input
                  type="text"
                  id="bloodgroup"
                  name="bloodgroup"
                  placeholder=" B+ "
                />
              </div>
              <div>
                <label class="label" for="height">Height</label>
                <input
                  type="number"
                  id="height"
                  name="height"
                  placeholder=" 170 cm "
                />
              </div>
              <div>
                <label class="label" for="weight">Weight</label>
                <input
                  type="number"
                  id="weight"
                  name="weight"
                  placeholder=" 80 Kg "
                />
              </div>
            </div>
            <div>
              <label class="label">Address</label>
              <div class="address">
                <input type="text" placeholder=" House No.." />
                <input type="text" placeholder="Street Address" />
                <input class="address-input" type="text" placeholder="City" />
                <input
                  class="address-input"
                  type="text"
                  placeholder="District"
                />
                <input
                  class="address-input"
                  type="text"
                  placeholder="State / Province"
                />
                <input
                  class="address-input"
                  type="text"
                  placeholder="Postal /Zip Code"
                />
              </div>
            </div>
            <div class="input-box">
              <div class="input-field">
                <label class="label" for="doctor"
                  >Which medical department do you Want?</label
                >
                <select name="checkup" id="doctor">
                  <option value="general Checkup">General Checkup</option>
                  <option value="Allergic">Allergic Diseases</option>
                  <option value="Cardiology">Cardiology</option>
                  <option value="skin">Skin and Venereal Disease</option>
                  <option value="ENT Disorders">
                    Ear,Nose and Throat Disorders
                  </option>
                  <option value="Eye">Eye Center</option>
                  <option value="Infections">Infections Diseases</option>
                  <option value="Neurology">Neurology</option>
                  <option value="Oncology">Oncology</option>
                  <option value="Pediatrics">Pediatrics</option>
                  <option value="Psychiatry">Psychiatry</option>
                  <option value="Psychology">Psychology</option>
                  <option value="Radiology">Radiology</option>
                  <option value="Urology">Urology</option>
                </select>
              </div>
              <div class="input-field">
                <label class="label" for="doctor">Specalist Doctors</label>
                <select name="doctorName" id="doctor">
                  <option value="">-select Doctor-</option>
                  <option value="Dr.John">Dr.John</option>
                  <option value="Dr.Smith">Dr.Smith</option>
                  <option value="Dr.Adam">Dr.Adam</option>
                  <option value="Dr.Jonas">Dr.Jonas</option>
                </select>
              </div>
            </div>
            <div class="input-box">
              <div class="input-field">
                <label class="label" for="time">Select Time</label>
                <input type="datetime-local" id="time" name="appoinmentTime" />
              </div>
              <div>
                <label class="label" for="">Contact Preference</label>
                <div class="contact">
                  <div>
                    <input type="checkbox" id="contact-email" name="contact" />
                    <label class="" for="contact-email">Via Email</label>
                  </div>
                  <div>
                    <input type="checkbox" id="contact-phone" name="contact" />
                    <label class="" for="contact-phone">Via Phone</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-box">
              <label class="label" for="description"
                >Please explain your medical history briefly.</label
              >
              <textarea
                name="description"
                id="description"
                rows="7"
                placeholder="Type here.."
              ></textarea>
            </div>
            <div class="check-box-agree">
              <input type="checkbox" id="chkbox" />
              <label class="checkbox-label" for="chkbox">
                I agree to the terms and conditions
              </label>
            </div>
            <div class="footer">
              <button
                type="button"
                class="button"
                onclick="submitAppoinmentForm()"
              >
                Make Appoinment
              </button>
            </div>
          </form>
          <div>
            <button class="btn-close" onclick="formClose()">
              <svg
                data-v-6a943414=""
                width="24"
                height="24"
                xmlns="http://www.w3.org/2000/svg"
                class="close-icon"
              >
                <path
                  d="M6.414 5A1 1 0 1 0 5 6.414L10.586 12 5 17.586A1 1 0 1 0 6.414 19L12 13.414 17.586 19A1 1 0 1 0 19 17.586L13.414 12 19 6.414A1 1 0 1 0 17.586 5L12 10.586 6.414 5Z"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </section>
  </body>
  <script>
    //show and hide the profie tap
    let profile = document.querySelector(".profile-logo");
    let showProfile = document.querySelector(".show-profile");
    profile.addEventListener("click", () => {
      showProfile.classList.toggle("visible");
      profile.classList.toggle("profile-logo-shadow");
    });
    // show and hide the main container and appoinment container
    let homePageLink = document.querySelector("#homepage-link");
    let appoinmentPageLink = document.querySelector("#appoinmentpage-link");
    let mainContainer = document.querySelector(".main-content");
    let appoinmentContainer = document.querySelector(".appoinment-container");
    homePageLink.addEventListener("click", showHomePage);
    appoinmentPageLink.addEventListener("click", showAppoinmentPage);
    function showHomePage() {
      mainContainer.classList.remove("hidden");
      appoinmentContainer.classList.add("hidden");
      homePageLink.classList.add("active");
      appoinmentPageLink.classList.remove("active");
    }

    function showAppoinmentPage() {
      mainContainer.classList.add("hidden");
      appoinmentContainer.classList.remove("hidden");
      homePageLink.classList.remove("active");
      appoinmentPageLink.classList.add("active");
    }
    //close form
    function formClose() {
      document.querySelector(".form-section").style.display = "none";
      mainContainer.classList.add("hidden");
      appoinmentContainer.classList.remove("hidden");
      resetFormValues();
    }
    ///////////////////////////////////////
    //////////////////////////////////////

    //form.js

    let appoinmentDataArr = [];
    function submitAppoinmentForm() {
      let appoinmentFormData = document.getElementById("appoinment-form");
      let gender = document.appoinmentform.gender.value;
      let formValue = new FormData(appoinmentFormData);
      let patientdata = {};
      for (const [key, value] of formValue) {
        patientdata[key] = value;
      }
      patientdata["gender"] = gender;

      appoinmentDataArr.push(patientdata);

      localStorage.setItem("patientData", JSON.stringify(appoinmentDataArr));

      //reset form values

      resetFormValues();
      formClose();
      getPatientData();
      // window.location.href = "patient.html";
    }
    //reset form values
    function resetFormValues() {
      let appoinmentFormData = document.getElementById("appoinment-form");
      for (let val of appoinmentFormData) {
        // console.log((val.value = ""));
        if (val.type == "radio" || val.type == "checkbox") {
          val.checked = false;
        } else if (val.type == "select-one") {
          val.selectedIndex = -1;
        } else {
          val.value = "";
        }
      }
    }
    function showAppoinmentForm() {
      document.querySelector(".form-section").style.display = "block";
    }
    function getPatientData() {
      let patientData = JSON.parse(localStorage.getItem("patientData"));
      console.log(patientData);
      if (patientData) {
        let cardDetails = "";
        let cardContainer = document.querySelector(".card-container");
        patientData.forEach((val, i) => {
          console.log(val, i);
          // console.log(val.appoinmentTime.split("T"));
          let appoinmentTime = val.appoinmentTime.split("T");
          cardDetails += ` <div class="appoinment-card">
              <h3 class="appoinment-title">Appoinment On <span class='card-date'> ${appoinmentTime[0]} </span> <span class='card-time'> ${appoinmentTime[1]} </span> </h3>
              <div class="card-box">
               
                <p class="card-doctor-name">${val.doctorName}</p>
                
                <p class="card-checkup">${val.checkup}</p>
                <p class='view-more'>View More</p>
              <button class="card-close"><img src="images/icons8-close-24.png"
                
              </div>
            </div>`;
        });
        cardContainer.innerHTML = cardDetails;
      }
    }
  </script>
</html>
